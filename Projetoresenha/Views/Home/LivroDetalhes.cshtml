@model Projetoresenha.Models.LivroDetalhesViewModel

@{
    ViewData["Title"] = Model.Titulo;
}

<h2>@Model.Titulo</h2>
<p><strong>Autor:</strong> @Model.AutorNome</p>

@if (!string.IsNullOrWhiteSpace(Model.Descricao))
{
    <p>@Model.Descricao</p>
}

<p>
    <strong>Nota média:</strong>
    @(Model.NotaMedia > 0 ? Model.NotaMedia.ToString("0.0") : "Sem avaliações")
</p>

<hr />

<h3>Comentários</h3>

@if (Model.Resenhas != null && Model.Resenhas.Any())
{
    <ul class="list-group mb-4">
        @foreach (var r in Model.Resenhas)
        {
            <li class="list-group-item">
                <div>
                    <strong>@r.UsuarioNome</strong>
                    - nota: @r.Nota
                    <span class="text-muted float-end">@r.Data.ToString("dd/MM/yyyy")</span>
                </div>
                <div>@r.Comentario</div>
            </li>
        }
    </ul>
}
else
{
    <p>Este livro ainda não possui comentários.</p>
}

<hr />

<h3>Adicionar comentário</h3>

<form asp-action="Detalhes" method="post">
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="Id" />

    <div class="mb-3">
        <label asp-for="NovaNota"></label>
        <select asp-for="NovaNota" class="form-select">
            <option value="1">1 - Péssimo</option>
            <option value="2">2 - Ruim</option>
            <option value="3">3 - Regular</option>
            <option value="4">4 - Bom</option>
            <option value="5">5 - Excelente</option>
        </select>
        <span asp-validation-for="NovaNota" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="NovoComentario"></label>
        <textarea asp-for="NovoComentario" class="form-control"></textarea>
        <span asp-validation-for="NovoComentario" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Enviar comentário</button>
</form>
